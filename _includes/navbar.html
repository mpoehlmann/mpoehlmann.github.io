<nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="mainNav">
  <div class="container">

    <!-- Logo or site title -->
    {%- assign href = "/" | prepend: site.baseurl -%}
    <a class="navbar-brand" href="{{ href }}" onclick="gtag('event', 'click', {'event_category':'internal', 'event_label':'{{ href }}'});">
      {%- if site.logo -%}
        <img height="{{ site.logo.height | default: 52 }}" src="{{ site.logo.path }}"/>
      {%- else -%}
        {{ site.title }}
      {%- endif -%}
    </a>

    <!-- Dropdown button if site is too narrow -->
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Navigation links -->
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav mr-auto">
        {%- for link in site.data.navigation.navbar -%}
          {%- assign link_name = link.title | append: "." -%}
          <!-- TODO: Add sublinks -->
          {%- if link.url -%}
            {%- assign href = link.url | prepend: site.baseurl -%}
            {%- assign current_url = page.url | remove: ".html" -%}
            <!-- Determine if active -->
            {%- assign class = "" -%}
            {% if link.url == current_url %}
              {%- assign class = "current" -%}
            {%- endif -%}
            <li class="nav-item">
              <a class="nav-link {{ class }}" href="{{ href }}" onclick="gtag('event', 'click', {'event_category':'internal', 'event_label':'{{ href }}'});">{{ link_name }}</a>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </div>

  </div>
</nav>

{%- comment -%}
<!-- Dropdown links -->
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Click Me!
  </a>
  <!-- Here's the magic. Add the .animate and .slideIn classes to your .dropdown-menu and you're all set! -->
  <div class="dropdown-menu dropdown-menu-end animate slideIn" aria-labelledby="navbarDropdown">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="#">Something else here</a>
  </div>
</li>
{%- endcomment -%}